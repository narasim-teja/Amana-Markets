# Alto Bundler for ERC-4337 on ADI Testnet
# Usage: docker compose up -d
# Verify: curl -s http://localhost:4337 -H "Content-Type: application/json" -d '{"jsonrpc":"2.0","method":"eth_supportedEntryPoints","params":[],"id":1}'

services:
  alto-bundler:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: adi-alto-bundler
    restart: unless-stopped
    ports:
      - "${BUNDLER_PORT:-4337}:4337"
    environment:
      - BUNDLER_PRIVATE_KEY=${BUNDLER_PRIVATE_KEY:?Set BUNDLER_PRIVATE_KEY in .env}
      - RPC_URL=${RPC_URL:-https://rpc.ab.testnet.adifoundation.ai/}
      - ENTRYPOINT_ADDRESS=${ENTRYPOINT_ADDRESS:-0x0000000071727De22E5E9d8BAf0edAc6f37da032}
    healthcheck:
      test: ["CMD", "wget", "--spider", "-q", "http://localhost:4337"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 30s
